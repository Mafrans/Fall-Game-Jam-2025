[gd_scene load_steps=23 format=3 uid="uid://bc2oars1gbw84"]

[ext_resource type="PackedScene" uid="uid://q7n36fbceqxr" path="res://bo/player.tscn" id="1_hhuon"]
[ext_resource type="Script" uid="uid://d07smm1l12lok" path="res://bo/door.gd" id="2_54lrv"]
[ext_resource type="Script" uid="uid://gqfpu0jufaf8" path="res://otto/shop_keeper.gd" id="4_i6ofk"]
[ext_resource type="Script" uid="uid://dacxu0vph8nct" path="res://otto/ui.gd" id="5_pya1m"]
[ext_resource type="Texture2D" uid="uid://jtjl1kk2oxw1" path="res://malte/shopkeeper.png" id="5_ywhaf"]
[ext_resource type="Texture2D" uid="uid://7b6mx2llg4xa" path="res://icon.svg" id="6_iyph2"]
[ext_resource type="Theme" uid="uid://8ywflfwlqq8h" path="res://otto/start.tres" id="6_ti35s"]
[ext_resource type="FontFile" uid="uid://dn3p083tt1e8b" path="res://otto/ModernAntiqua-Regular.ttf" id="6_xeus7"]
[ext_resource type="Script" uid="uid://bertdsmf600i2" path="res://otto/dummy.gd" id="7_xeus7"]
[ext_resource type="Script" uid="uid://b0m7yu5ni8coj" path="res://otto/shop_guy.gd" id="8_1s5p4"]
[ext_resource type="Texture2D" uid="uid://bb2o2o0ufl0i2" path="res://malte/dummy.png" id="9_5k8ff"]
[ext_resource type="Script" uid="uid://djfvsx0ew7aby" path="res://bo/heal_pots_display.gd" id="12_6ud2m"]
[ext_resource type="PackedScene" uid="uid://bv2ljbcj0um21" path="res://bo/heal_pot.tscn" id="13_2mxkd"]
[ext_resource type="Script" uid="uid://d2o32ba28400j" path="res://bo/health_display.gd" id="14_w5wpt"]
[ext_resource type="PackedScene" uid="uid://ckaa52aa1p7sg" path="res://bo/heart.tscn" id="15_rf8lc"]
[ext_resource type="Script" uid="uid://1hk44qns08hx" path="res://bo/stamina_display.gd" id="16_l0fq7"]
[ext_resource type="Script" path="res://bo/gold_display.gd" id="17_3olfc"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nwq13"]
size = Vector2(128, 128)

[sub_resource type="CircleShape2D" id="CircleShape2D_pya1m"]

[sub_resource type="Theme" id="Theme_ywhaf"]

[sub_resource type="LabelSettings" id="LabelSettings_1s5p4"]
font = ExtResource("6_xeus7")

[sub_resource type="LabelSettings" id="LabelSettings_6daep"]

[node name="Start" type="Node2D"]

[node name="Camera" type="Camera2D" parent="."]
position = Vector2(0, -399)
zoom = Vector2(1.8, 1.8)

[node name="Player" parent="." instance=ExtResource("1_hhuon")]
position = Vector2(0, -167)
scale = Vector2(0.6, 0.6)
roll_duration = 0.3
roll_dropoff = 200.0

[node name="Door" type="Area2D" parent="."]
modulate = Color(0.5662982, 0.5662982, 0.5662982, 1)
position = Vector2(0, -707)
scale = Vector2(2.74, 0.265)
script = ExtResource("2_54lrv")

[node name="Sprite2D" type="Sprite2D" parent="Door"]
texture = ExtResource("6_iyph2")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Door"]
shape = SubResource("RectangleShape2D_nwq13")

[node name="ShopKeeper" type="CharacterBody2D" parent="." node_paths=PackedStringArray("ui", "player", "typewriter")]
position = Vector2(389, -519)
script = ExtResource("4_i6ofk")
ui = NodePath("UI")
player = NodePath("../Player")
typewriter = NodePath("UI/ColorRect/Typewriter")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ShopKeeper"]
position = Vector2(-1, -22)
scale = Vector2(1.88, 1.88)
shape = SubResource("CircleShape2D_pya1m")

[node name="UI" type="Node2D" parent="ShopKeeper"]
position = Vector2(9, -40)
script = ExtResource("5_pya1m")

[node name="Shop" type="GridContainer" parent="ShopKeeper/UI"]
offset_left = -198.0
offset_top = 61.0
offset_right = -66.395004
offset_bottom = 135.0
theme = ExtResource("6_ti35s")
theme_override_constants/v_separation = 8

[node name="Health" type="Button" parent="ShopKeeper/UI/Shop"]
layout_mode = 2
theme = ExtResource("6_ti35s")
text = "+health (3 gold)"

[node name="Potion" type="Button" parent="ShopKeeper/UI/Shop"]
layout_mode = 2
theme = ExtResource("6_ti35s")
text = "+potion (6 gold)"

[node name="Speed" type="Button" parent="ShopKeeper/UI/Shop"]
layout_mode = 2
theme = ExtResource("6_ti35s")
text = "+speed (2 gold)"

[node name="Agility" type="Button" parent="ShopKeeper/UI/Shop"]
layout_mode = 2
theme = ExtResource("6_ti35s")
text = "+agility (2 gold)"

[node name="Damage" type="Button" parent="ShopKeeper/UI/Shop"]
layout_mode = 2
theme = ExtResource("6_ti35s")
text = "+damage (3 gold)"

[node name="ColorRect" type="ColorRect" parent="ShopKeeper/UI"]
offset_left = -198.0
offset_top = -51.0
offset_right = -65.0
offset_bottom = 55.0
theme = SubResource("Theme_ywhaf")
color = Color(0.16, 0.16, 0.16, 0.78431374)

[node name="Typewriter" type="Label" parent="ShopKeeper/UI/ColorRect"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 3.0
offset_top = 3.0
offset_right = -3.0
offset_bottom = -3.0
grow_horizontal = 2
grow_vertical = 2
label_settings = SubResource("LabelSettings_1s5p4")

[node name="ShopGuy" type="Node2D" parent="ShopKeeper"]
position = Vector2(-3, 1)
script = ExtResource("8_1s5p4")

[node name="ShopKeeperSprite" type="Sprite2D" parent="ShopKeeper/ShopGuy"]
position = Vector2(61, -88)
scale = Vector2(0.17195016, 0.17195016)
texture = ExtResource("5_ywhaf")

[node name="Dummy" type="CharacterBody2D" parent="."]
position = Vector2(-382.395, -456.125)
script = ExtResource("7_xeus7")

[node name="Dummy2" type="Sprite2D" parent="Dummy"]
position = Vector2(-4.639984, -62.880005)
scale = Vector2(0.195, 0.195)
texture = ExtResource("9_5k8ff")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Dummy"]
position = Vector2(-4.639984, -62.880005)
scale = Vector2(1.2, 1.2)
build_mode = 1
polygon = PackedVector2Array(-14, -6, -29, -7, -29, -3, -30, 0, -37, -4, -41, -2, -39, -14, -50, -16, -42, -27, -48, -36, -41, -38, -38, -53, -26, -34, -14, -32, -17, -36, -2, -39, 14, -36, 21, -37, 24, -62, 30, -45, 44, -52, 36, -33, 48, -38, 41, -21, 51, -17, 36, -7, 13, -5, 11, 18, 4, 23, 8, 61, 2, 65, -1, 23, -7, 22, -34, 52, -41, 51, -20, 11, -13, 11)

[node name="HUD" type="VBoxContainer" parent="."]
offset_left = -515.0
offset_top = -331.0
offset_right = -100.0
offset_bottom = -121.0
alignment = 2

[node name="HealPots" type="HBoxContainer" parent="HUD" node_paths=PackedStringArray("player")]
layout_mode = 2
script = ExtResource("12_6ud2m")
heart = ExtResource("13_2mxkd")
player = NodePath("../../Player")

[node name="Hearts" type="HBoxContainer" parent="HUD" node_paths=PackedStringArray("player")]
layout_mode = 2
script = ExtResource("14_w5wpt")
heart_scenes = Array[PackedScene]([ExtResource("15_rf8lc")])
player = NodePath("../../Player")

[node name="Stamina" type="ProgressBar" parent="HUD" node_paths=PackedStringArray("player")]
layout_mode = 2
theme = ExtResource("6_ti35s")
value = 50.0
script = ExtResource("16_l0fq7")
player = NodePath("../../Player")

[node name="Gold" type="Label" parent="HUD"]
layout_mode = 2
theme = ExtResource("6_ti35s")
text = "50 gold"
label_settings = SubResource("LabelSettings_6daep")
script = ExtResource("17_3olfc")

[connection signal="damage_target" from="Player" to="Dummy" method="_on_player_damage_target"]
[connection signal="body_entered" from="Door" to="Door" method="_on_body_entered"]
[connection signal="pressed" from="ShopKeeper/UI/Shop/Health" to="ShopKeeper" method="_on_health_pressed"]
[connection signal="pressed" from="ShopKeeper/UI/Shop/Potion" to="ShopKeeper" method="_on_potion_pressed"]
[connection signal="pressed" from="ShopKeeper/UI/Shop/Speed" to="ShopKeeper" method="_on_speed_pressed"]
[connection signal="pressed" from="ShopKeeper/UI/Shop/Agility" to="ShopKeeper" method="_on_agility_pressed"]
[connection signal="pressed" from="ShopKeeper/UI/Shop/Damage" to="ShopKeeper" method="_on_damage_pressed"]
